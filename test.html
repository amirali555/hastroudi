<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¯Ú©ØªØ± Ù‡Ø´ØªØ±ÙˆØ¯ÛŒ | Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡</title>
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ±Ù…ØªÙ† Ùˆ Font Awesome -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Chart.js Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background: #f8fafc;
            color: #0f172a;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Ù‡Ø¯Ø± */
        header {
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            color: #2563eb;
        }

        .logo h1 {
            font-size: 1.6rem;
            color: #0f172a;
        }

        .logo span {
            background: #e2e8f0;
            color: #2563eb;
            padding: 4px 10px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .main-nav {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .main-nav button {
            background: none;
            border: none;
            padding: 8px 16px;
            font-size: 1rem;
            font-weight: 500;
            color: #334155;
            cursor: pointer;
            border-radius: 30px;
            transition: 0.2s;
        }

        .main-nav button.active {
            background: #2563eb;
            color: white;
        }

        .main-nav button:not(.active):hover {
            background: #e2e8f0;
        }

        .login-btn {
            background: #10b981 !important;
            color: white !important;
        }

        .register-btn {
            background: #f59e0b !important;
            color: white !important;
        }

        .logout-btn {
            background: #ef4444 !important;
            color: white !important;
        }

        .hamburger {
            display: none;
            font-size: 1.8rem;
            cursor: pointer;
        }

        .section {
            display: none;
            padding: 30px 0;
        }

        .section.active {
            display: block;
        }

        .hero {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            color: white;
            text-align: center;
            padding: 60px 20px;
            border-radius: 30px;
            margin-bottom: 40px;
        }

        .hero h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .feature-item {
            background: white;
            border-radius: 16px;
            padding: 20px 8px;
            text-align: center;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid #e2e8f0;
            position: relative;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            border-color: #2563eb;
        }

        .feature-item i {
            font-size: 2rem;
            color: #2563eb;
            margin-bottom: 8px;
        }

        .feature-item span {
            display: block;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .feature-badge {
            position: absolute;
            top: 5px;
            left: 5px;
            background: #10b981;
            color: white;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 20px;
        }

        .operation-section {
            background: white;
            border-radius: 24px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
        }

        .section-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 8px 20px;
            font-size: 0.95rem;
            font-weight: 500;
            color: #64748b;
            cursor: pointer;
            border-radius: 30px;
            transition: 0.2s;
        }

        .tab-btn.active {
            background: #2563eb;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 10px 12px;
            border: 1px solid #cbd5e1;
            border-radius: 12px;
            font-family: inherit;
            font-size: 0.95rem;
        }

        .btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn:hover {
            background: #1d4ed8;
        }

        .btn-danger {
            background: #ef4444;
        }
        .btn-danger:hover { background: #dc2626; }

        .btn-success {
            background: #10b981;
        }
        .btn-success:hover { background: #059669; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: #f8fafc;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #2563eb;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 16px;
            overflow: hidden;
        }

        .data-table th {
            background: #1e293b;
            color: white;
            padding: 12px;
            font-weight: 500;
        }

        .data-table td {
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            text-align: center;
        }

        .data-table tr:hover {
            background: #f1f5f9;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 200;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 24px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-btn {
            float: left;
            font-size: 1.5rem;
            cursor: pointer;
            color: #94a3b8;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .main-nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 70px;
                left: 0;
                right: 0;
                background: white;
                padding: 20px;
                box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            }
            .main-nav.active {
                display: flex;
            }
            .hamburger {
                display: block;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-school"></i>
                <h1>Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ø¯Ú©ØªØ± Ù‡Ø´ØªØ±ÙˆØ¯ÛŒ <span>Û²Û°</span></h1>
            </div>
            <nav class="main-nav" id="mainNav">
                <button class="active" data-section="smart">ğŸ  Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯</button>
                <button data-section="news">ğŸ“° Ø§Ø®Ø¨Ø§Ø± Ùˆ Ú¯Ø§Ù„Ø±ÛŒ</button>
                <button id="registerBtn" class="register-btn"><i class="fas fa-user-plus"></i> Ø«Ø¨Øª Ù†Ø§Ù…</button>
                <button id="loginBtn" class="login-btn"><i class="fas fa-sign-in-alt"></i> ÙˆØ±ÙˆØ¯</button>
                <button id="logoutBtn" class="logout-btn" style="display: none;"><i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</button>
            </nav>
            <div class="hamburger" id="hamburger">â˜°</div>
        </div>
    </header>

    <main>
        <!-- ========== Ø¨Ø®Ø´ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ ========== -->
        <section id="smartSection" class="section active">
            <div class="container">
                <div class="hero">
                    <h2>ğŸ« Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¬Ø§Ù…Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø¯Ø±Ø³Ù‡</h2>
                    <p>Ø§Ù„Ú¯ÙˆØ¨Ø±Ø¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø² Ø¨Ø±ØªØ±ÛŒÙ† Ø³Ø§Ù…Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø§Ø±Ø³ Ø§ÛŒØ±Ø§Ù† (Ù…Ø¯ÛŒØ§Ø±ØŒ Ø³Ø§ÛŒÙ…Ø§ØŒ Ù„ÛŒØ²Ø§ØŒ Ù¾ÙˆÛŒØ§)</p>
                </div>

                <!-- Ú¯Ø±ÛŒØ¯ Û²Û° ÙˆÛŒÚ˜Ú¯ÛŒ -->
                <div class="features-grid" id="featuresGrid">
                    <div class="feature-item" data-feature="Ù†Ù…Ø±Ø§Øª"><i class="fas fa-star"></i><span>Ù†Ù…Ø±Ø§Øª</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡"><i class="fas fa-calendar-day"></i><span>Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯"><i class="fas fa-chart-line"></i><span>Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ú¯Ø²Ø§Ø±Ø´ Ù‡Ù…Ù‡â€ŒÙ‡Ø§"><i class="fas fa-file-alt"></i><span>Ú¯Ø²Ø§Ø±Ø´ Ù‡Ù…Ù‡â€ŒÙ‡Ø§</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø¨ÛŒØ±Ø§Ù†"><i class="fas fa-users"></i><span>Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø¨ÛŒØ±Ø§Ù†</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø§Ø®Ø¨Ø§Ø±"><i class="fas fa-newspaper"></i><span>Ø§Ø®Ø¨Ø§Ø±</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø§Ø­ØªÛŒØ§Ø·"><i class="fas fa-exclamation-triangle"></i><span>Ø§Ø­ØªÛŒØ§Ø·</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ù…ÙˆØ±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ"><i class="fas fa-gavel"></i><span>Ù…ÙˆØ±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù…"><i class="fas fa-inbox"></i><span>ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù…</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="ØªÚ©Ø§Ù„ÛŒÙ"><i class="fas fa-pencil-alt"></i><span>ØªÚ©Ø§Ù„ÛŒÙ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ"><i class="fas fa-cubes"></i><span>Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="ØµØ¯Ø§ÛŒ Ø´Ù…Ø§"><i class="fas fa-microphone"></i><span>ØµØ¯Ø§ÛŒ Ø´Ù…Ø§</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ"><i class="fas fa-video"></i><span>Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†"><i class="fas fa-laptop"></i><span>Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ù…Ø´Ø§ÙˆØ±Ù‡"><i class="fas fa-comments"></i><span>Ù…Ø´Ø§ÙˆØ±Ù‡</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ"><i class="fas fa-calendar-week"></i><span>Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø·Ø§Ù„Ø¹Ø§ØªÛŒ"><i class="fas fa-book-reader"></i><span>Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø·Ø§Ù„Ø¹Ø§ØªÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ"><i class="fas fa-poll"></i><span>Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨"><i class="fas fa-check-circle"></i><span>Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                    <div class="feature-item" data-feature="Ø«Ø¨Øª Ù†Ø§Ù…"><i class="fas fa-user-plus"></i><span>Ø«Ø¨Øª Ù†Ø§Ù…</span><span class="feature-badge">ÙØ¹Ø§Ù„</span></div>
                </div>

                <!-- ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ -->
                <div class="operation-section">
                    <div class="section-tabs" id="mainTabs">
                        <button class="tab-btn active" data-tab="grades">ğŸ“Š Ù†Ù…Ø±Ø§Øª</button>
                        <button class="tab-btn" data-tab="daily">ğŸ“‹ Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡</button>
                        <button class="tab-btn" data-tab="discipline">âš ï¸ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ</button>
                        <button class="tab-btn" data-tab="messages">âœ‰ï¸ ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù…</button>
                        <button class="tab-btn" data-tab="homework">ğŸ“š ØªÚ©Ø§Ù„ÛŒÙ</button>
                        <button class="tab-btn" data-tab="virtualclass">ğŸ¥ Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ</button>
                        <button class="tab-btn" data-tab="exam">ğŸ“ Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†</button>
                        <button class="tab-btn" data-tab="consult">ğŸ’¬ Ù…Ø´Ø§ÙˆØ±Ù‡</button>
                        <button class="tab-btn" data-tab="survey">ğŸ“Š Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</button>
                        <button class="tab-btn" data-tab="schedule">ğŸ“… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ</button>
                    </div>

                    <!-- Ù†Ù…Ø±Ø§Øª -->
                    <div id="grades-tab" class="tab-content active">
                        <div class="stats-grid">
                            <div class="stat-card"><span class="stat-number" id="avgGrade">Û°</span><div>Ù…Ø¹Ø¯Ù„ Ú©Ù„</div></div>
                            <div class="stat-card"><span class="stat-number" id="bestGrade">Û°</span><div>Ø¨Ù‡ØªØ±ÛŒÙ† Ù†Ù…Ø±Ù‡</div></div>
                            <div class="stat-card"><span class="stat-number" id="worstGrade">Û°</span><div>Ø¶Ø¹ÛŒÙâ€ŒØªØ±ÛŒÙ†</div></div>
                        </div>
                        <div class="chart-container"><canvas id="gradesChart"></canvas></div>
                        <div style="overflow-x: auto;">
                            <table class="data-table">
                                <thead><tr><th>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th><th>Ø¯Ø±Ø³</th><th>Ù†Ù…Ø±Ù‡</th><th>ØªØ±Ù…</th><th>ØªØ§Ø±ÛŒØ®</th></tr></thead>
                                <tbody id="gradesTableBody"></tbody>
                            </table>
                        </div>
                        <div id="gradeForm" style="margin-top: 20px; display: none;">
                            <h4>Ø«Ø¨Øª Ù†Ù…Ø±Ù‡ Ø¬Ø¯ÛŒØ¯</h4>
                            <div class="form-row">
                                <div class="form-group"><label>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</label><select id="gradeStudent"></select></div>
                                <div class="form-group"><label>Ø¯Ø±Ø³</label><input type="text" id="gradeSubject" placeholder="Ø±ÛŒØ§Ø¶ÛŒ"></div>
                            </div>
                            <div class="form-row">
                                <div class="form-group"><label>Ù†Ù…Ø±Ù‡</label><input type="number" id="gradeScore" min="0" max="20" step="0.25"></div>
                                <div class="form-group"><label>ØªØ±Ù…</label><select id="gradeTerm"><option value="Ø§ÙˆÙ„">Ø§ÙˆÙ„</option><option value="Ø¯ÙˆÙ…">Ø¯ÙˆÙ…</option></select></div>
                            </div>
                            <button class="btn" id="saveGrade">Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…Ø±Ù‡</button>
                        </div>
                    </div>

                    <!-- Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ -->
                    <div id="daily-tab" class="tab-content">
                        <div class="stats-grid">
                            <div class="stat-card"><span class="stat-number" id="presentToday">Û°</span><div>Ø­Ø§Ø¶Ø±ÛŒÙ† Ø§Ù…Ø±ÙˆØ²</div></div>
                            <div class="stat-card"><span class="stat-number" id="absentToday">Û°</span><div>ØºØ§ÛŒØ¨ÛŒÙ† Ø§Ù…Ø±ÙˆØ²</div></div>
                            <div class="stat-card"><span class="stat-number" id="hwToday">Û°</span><div>ØªÚ©Ø§Ù„ÛŒÙ Ø¬Ø¯ÛŒØ¯</div></div>
                        </div>
                        <div id="dailyDetails" style="background:#f8fafc; padding:15px; border-radius:16px;"></div>
                    </div>

                    <!-- Ù…ÙˆØ§Ø±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ -->
                    <div id="discipline-tab" class="tab-content">
                        <div id="disciplineForm" style="margin-bottom:20px; display:none;">
                            <h4>Ø«Ø¨Øª Ù…ÙˆØ±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ</h4>
                            <div class="form-row">
                                <div class="form-group"><label>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</label><select id="disciplineStudent"></select></div>
                                <div class="form-group"><label>Ù†ÙˆØ¹</label><select id="disciplineType"><option value="positive">âœ… ØªØ´ÙˆÛŒÙ‚</option><option value="negative">âš ï¸ Ø§Ø®Ø·Ø§Ø±</option></select></div>
                            </div>
                            <div class="form-group"><label>ØªÙˆØ¶ÛŒØ­Ø§Øª</label><textarea id="disciplineDesc" rows="2"></textarea></div>
                            <button class="btn" id="saveDiscipline">Ø«Ø¨Øª</button>
                        </div>
                        <table class="data-table">
                            <thead><tr><th>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th><th>Ù†ÙˆØ¹</th><th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th><th>ØªØ§Ø±ÛŒØ®</th></tr></thead>
                            <tbody id="disciplineTable"></tbody>
                        </table>
                    </div>

                    <!-- ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù… -->
                    <div id="messages-tab" class="tab-content">
                        <button class="btn" id="newMessageBtn" style="margin-bottom:15px;">âœ‰ï¸ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯</button>
                        <div id="messageList"></div>
                    </div>

                    <!-- ØªÚ©Ø§Ù„ÛŒÙ -->
                    <div id="homework-tab" class="tab-content">
                        <div id="homeworkForm" style="margin-bottom:20px; display:none;">
                            <div class="form-row">
                                <div class="form-group"><label>Ø¹Ù†ÙˆØ§Ù†</label><input type="text" id="hwTitle"></div>
                                <div class="form-group"><label>Ù¾Ø§ÛŒÙ‡</label><select id="hwClass"><option>Ù‡ÙØªÙ…</option><option>Ù‡Ø´ØªÙ…</option><option>Ù†Ù‡Ù…</option></select></div>
                            </div>
                            <div class="form-group"><label>ØªÙˆØ¶ÛŒØ­Ø§Øª</label><textarea id="hwDesc" rows="2"></textarea></div>
                            <button class="btn" id="saveHomework">Ø«Ø¨Øª ØªÚ©Ù„ÛŒÙ</button>
                        </div>
                        <div id="homeworkList"></div>
                    </div>

                    <!-- Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ -->
                    <div id="virtualclass-tab" class="tab-content">
                        <div class="stats-grid">
                            <div class="stat-card"><i class="fas fa-video fa-2x" style="color:#2563eb;"></i><h4>Ø§Ø³Ú©Ø§ÛŒ Ø±ÙˆÙ…</h4><button class="btn btn-success" onclick="joinClass('skyroom')">ÙˆØ±ÙˆØ¯</button></div>
                            <div class="stat-card"><i class="fas fa-chalkboard fa-2x" style="color:#10b981;"></i><h4>Ø¨ÛŒÚ¯ Ø¨Ù„ÙˆØ¨Ø§ØªÙ†</h4><button class="btn btn-success" onclick="joinClass('bbb')">ÙˆØ±ÙˆØ¯</button></div>
                            <div class="stat-card"><i class="fas fa-laptop fa-2x" style="color:#f59e0b;"></i><h4>Ø§Ø¯ÙˆØ¨ÛŒ Ú©Ø§Ù†Ú©Øª</h4><button class="btn btn-success" onclick="joinClass('adobe')">ÙˆØ±ÙˆØ¯</button></div>
                        </div>
                        <div id="classSchedule"></div>
                    </div>

                    <!-- Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† -->
                    <div id="exam-tab" class="tab-content">
                        <div id="examForm" style="margin-bottom:20px; display:none;">
                            <h4>Ø§ÛŒØ¬Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯</h4>
                            <div class="form-row">
                                <div class="form-group"><label>Ø¹Ù†ÙˆØ§Ù†</label><input type="text" id="examTitle"></div>
                                <div class="form-group"><label>Ù…Ø¯Øª (Ø¯Ù‚ÛŒÙ‚Ù‡)</label><input type="number" id="examTime"></div>
                            </div>
                            <div class="form-group"><label>ØªÙˆØ¶ÛŒØ­Ø§Øª</label><textarea id="examDesc" rows="2"></textarea></div>
                            <button class="btn" id="createExam">Ø§ÛŒØ¬Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ†</button>
                        </div>
                        <div id="examList"></div>
                    </div>

                    <!-- Ù…Ø´Ø§ÙˆØ±Ù‡ -->
                    <div id="consult-tab" class="tab-content">
                        <div class="stats-grid">
                            <div class="stat-card"><i class="fas fa-calendar-check fa-2x"></i><h4>Ù†ÙˆØ¨Øª Ù…Ø´Ø§ÙˆØ±Ù‡</h4><button class="btn" id="bookConsultBtn">Ø±Ø²Ø±Ùˆ Ù†ÙˆØ¨Øª</button></div>
                            <div class="stat-card"><i class="fas fa-clock fa-2x"></i><h4>Ù†ÙˆØ¨Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</h4><div id="myAppointments">Û° Ù†ÙˆØ¨Øª</div></div>
                        </div>
                        <div id="consultationList"></div>
                    </div>

                    <!-- Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ -->
                    <div id="survey-tab" class="tab-content">
                        <div id="surveyForm" style="margin-bottom:20px; display:none;">
                            <h4>Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</h4>
                            <div class="form-group"><label>Ø³ÙˆØ§Ù„</label><input type="text" id="surveyQuestion"></div>
                            <div class="form-group"><label>Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§)</label><input type="text" id="surveyOptions" placeholder="Ø¹Ø§Ù„ÛŒ, Ø®ÙˆØ¨, Ù…ØªÙˆØ³Ø·, Ø¨Ø¯"></div>
                            <button class="btn" id="createSurvey">Ø§ÛŒØ¬Ø§Ø¯</button>
                        </div>
                        <div id="surveyList"></div>
                    </div>

                    <!-- Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ -->
                    <div id="schedule-tab" class="tab-content">
                        <div style="overflow-x:auto;">
                            <table class="data-table">
                                <thead><tr><th>Ø³Ø§Ø¹Øª</th><th>Ø´Ù†Ø¨Ù‡</th><th>ÛŒÚ©Ø´Ù†Ø¨Ù‡</th><th>Ø¯ÙˆØ´Ù†Ø¨Ù‡</th><th>Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡</th><th>Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡</th></tr></thead>
                                <tbody>
                                    <tr><td>Û¸-Û¹:Û³Û°</td><td>Ø±ÛŒØ§Ø¶ÛŒ</td><td>ÙØ§Ø±Ø³ÛŒ</td><td>Ø¹Ù„ÙˆÙ…</td><td>Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</td><td>Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</td></tr>
                                    <tr><td>Û¹:Û³Û°-Û±Û±</td><td>Ø¹Ù„ÙˆÙ…</td><td>Ø±ÛŒØ§Ø¶ÛŒ</td><td>ÙØ§Ø±Ø³ÛŒ</td><td>ÙˆØ±Ø²Ø´</td><td>Ù‡Ù†Ø±</td></tr>
                                    <tr><td>Û±Û±-Û±Û²:Û³Û°</td><td>Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</td><td>Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</td><td>Ø±ÛŒØ§Ø¶ÛŒ</td><td>ÙØ§Ø±Ø³ÛŒ</td><td>Ø¹Ù„ÙˆÙ…</td></tr>
                                    <tr><td>Û±Û²:Û³Û°-Û±Û³:Û³Û°</td><td colspan="5">Ø§Ø³ØªØ±Ø§Ø­Øª Ùˆ Ù†Ù…Ø§Ø²</td></tr>
                                    <tr><td>Û±Û³:Û³Û°-Û±Ûµ</td><td>Ù‚Ø±Ø¢Ù†</td><td>Ù‡Ù†Ø±</td><td>ÙˆØ±Ø²Ø´</td><td>ØªÙÚ©Ø±</td><td>Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="margin-top:20px;"><button class="btn" id="editScheduleBtn" style="display:none;">ÙˆÛŒØ±Ø§ÛŒØ´ Ø¨Ø±Ù†Ø§Ù…Ù‡</button></div>
                    </div>
                </div>

                <!-- Ø¨Ø®Ø´ Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± -->
                <div class="operation-section" id="registrationSection" style="display: none;">
                    <h3>ğŸ“‹ ÙØ±Ù… Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² (ÙˆÛŒÚ˜Ù‡ Ù…Ø¯ÛŒØ±)</h3>
                    <form id="adminRegistrationForm">
                        <div class="form-row">
                            <div class="form-group"><label>Ù†Ø§Ù…</label><input type="text" id="regName" required></div>
                            <div class="form-group"><label>Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label><input type="text" id="regFamily" required></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group"><label>Ú©Ø¯ Ù…Ù„ÛŒ</label><input type="text" id="regNational" required></div>
                            <div class="form-group"><label>ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯</label><input type="date" id="regBirth" required></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group"><label>Ù¾Ø§ÛŒÙ‡</label><select id="regGrade"><option>Ù‡ÙØªÙ…</option><option>Ù‡Ø´ØªÙ…</option><option>Ù†Ù‡Ù…</option></select></div>
                            <div class="form-group"><label>Ù†Ø§Ù… ÙˆØ§Ù„Ø¯ÛŒÙ†</label><input type="text" id="regParent" required></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group"><label>ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label><input type="tel" id="regPhone" required></div>
                            <div class="form-group"><label>ØªÙ„ÙÙ† Ø«Ø§Ø¨Øª</label><input type="tel" id="regLandline"></div>
                        </div>
                        <div class="form-group"><label>Ø¢Ø¯Ø±Ø³</label><textarea id="regAddress" rows="2" required></textarea></div>
                        <button type="submit" class="btn">Ø«Ø¨Øª Ù†Ø§Ù… Ùˆ Ø³Ø§Ø®Øª Ø­Ø³Ø§Ø¨</button>
                    </form>
                    <div style="margin-top:30px;">
                        <h4>Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø«Ø¨Øª Ù†Ø§Ù… Ø´Ø¯Ù‡</h4>
                        <table class="data-table">
                            <thead><tr><th>Ù†Ø§Ù…</th><th>Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</th><th>Ú©Ø¯ Ù…Ù„ÛŒ</th><th>Ù¾Ø§ÛŒÙ‡</th><th>ÙˆØ§Ù„Ø¯ÛŒÙ†</th><th>ØªÙ„ÙÙ†</th><th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th><th>Ø¹Ù…Ù„ÛŒØ§Øª</th></tr></thead>
                            <tbody id="registrationsList"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== Ø¨Ø®Ø´ Ø§Ø®Ø¨Ø§Ø± Ùˆ Ú¯Ø§Ù„Ø±ÛŒ ========== -->
        <section id="newsSection" class="section">
            <div class="container">
                <div class="hero">
                    <h2>ğŸ“° Ø§Ø®Ø¨Ø§Ø± Ù…Ø¯Ø±Ø³Ù‡ Ùˆ Ú¯Ø§Ù„Ø±ÛŒ ØªØµØ§ÙˆÛŒØ±</h2>
                </div>
                <div class="operation-section">
                    <div id="newsForm" style="margin-bottom:20px; display:none;">
                        <h4>Ø§ÙØ²ÙˆØ¯Ù† Ø®Ø¨Ø± Ø¬Ø¯ÛŒØ¯</h4>
                        <div class="form-row">
                            <div class="form-group"><label>Ø¹Ù†ÙˆØ§Ù†</label><input type="text" id="newsTitle"></div>
                            <div class="form-group"><label>ØªØ§Ø±ÛŒØ®</label><input type="date" id="newsDate"></div>
                        </div>
                        <div class="form-group"><label>Ù…ØªÙ† Ø®Ø¨Ø±</label><textarea id="newsContent" rows="3"></textarea></div>
                        <div class="form-group"><label>Ù„ÛŒÙ†Ú© ØªØµÙˆÛŒØ±</label><input type="url" id="newsImage" placeholder="https://..."></div>
                        <button class="btn" id="addNews">Ø§Ù†ØªØ´Ø§Ø± Ø®Ø¨Ø±</button>
                    </div>
                    <div id="newsContainer" class="news-grid" style="display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px;"></div>
                </div>
                <div class="operation-section">
                    <h3>ğŸ“¸ Ú¯Ø§Ù„Ø±ÛŒ ØªØµØ§ÙˆÛŒØ± Ù…Ø¯Ø±Ø³Ù‡</h3>
                    <div class="gallery-grid" style="display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; margin-top:20px;">
                        <img src="https://placehold.co/300x200/2563eb/white?text=Ú©Ù„Ø§Ø³" style="width:100%; border-radius:12px;">
                        <img src="https://placehold.co/300x200/10b981/white?text=Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡" style="width:100%; border-radius:12px;">
                        <img src="https://placehold.co/300x200/f59e0b/white?text=ÙˆØ±Ø²Ø´Ú¯Ø§Ù‡" style="width:100%; border-radius:12px;">
                        <img src="https://placehold.co/300x200/ef4444/white?text=Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡" style="width:100%; border-radius:12px;">
                    </div>
                </div>
            </div>
        </section>

        <!-- ========== Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ ========== -->
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal('loginModal')">&times;</span>
                <h3>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡</h3>
                <div class="form-group"><label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label><input type="text" id="loginUsername"></div>
                <div class="form-group"><label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label><input type="password" id="loginPassword"></div>
                <div class="form-group"><label>Ù†Ù‚Ø´</label><select id="loginRole"><option value="Ù…Ø¯ÛŒØ±">Ù…Ø¯ÛŒØ±</option><option value="Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option></select></div>
                <button class="btn" id="doLogin" style="width:100%;">ÙˆØ±ÙˆØ¯</button>
            </div>
        </div>

        <div id="registerModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal('registerModal')">&times;</span>
                <h3>Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</h3>
                <div class="form-group"><label>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</label><input type="text" id="regUsername"></div>
                <div class="form-group"><label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label><input type="password" id="regPassword"></div>
                <div class="form-group"><label>ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø²</label><input type="password" id="regConfirm"></div>
                <div class="form-group"><label>Ù†Ù‚Ø´</label><select id="regUserRole"><option value="Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option><option value="Ù…Ø¯ÛŒØ±">Ù…Ø¯ÛŒØ±</option></select></div>
                <div id="adminCodeField" style="display:none;"><div class="form-group"><label>Ú©Ø¯ Ø§Ø¯Ù…ÛŒÙ†</label><input type="text" id="adminCode"></div></div>
                <button class="btn" id="doRegister" style="width:100%;">Ø«Ø¨Øª Ù†Ø§Ù…</button>
            </div>
        </div>

        <div id="messageModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal('messageModal')">&times;</span>
                <h3>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯</h3>
                <div class="form-group"><label>Ú¯ÛŒØ±Ù†Ø¯Ù‡</label><select id="messageReceiver"></select></div>
                <div class="form-group"><label>Ù…ÙˆØ¶ÙˆØ¹</label><input type="text" id="messageSubject"></div>
                <div class="form-group"><label>Ù…ØªÙ† Ù¾ÛŒØ§Ù…</label><textarea id="messageBody" rows="4"></textarea></div>
                <button class="btn" id="sendMessage">Ø§Ø±Ø³Ø§Ù„</button>
            </div>
        </div>

        <div id="examModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal('examModal')">&times;</span>
                <h3 id="examModalTitle">Ø¢Ø²Ù…ÙˆÙ†</h3>
                <div id="examQuestions"></div>
                <button class="btn" id="submitExam">Ø«Ø¨Øª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§</button>
            </div>
        </div>

        <div id="surveyModal" class="modal">
            <div class="modal-content">
                <span class="close-btn" onclick="closeModal('surveyModal')">&times;</span>
                <h3 id="surveyModalTitle"></h3>
                <div id="surveyOptions"></div>
                <button class="btn" id="voteSurvey">Ø«Ø¨Øª Ø±Ø£ÛŒ</button>
            </div>
        </div>
    </main>

    <footer style="background:#1e293b; color:white; text-align:center; padding:30px 0; margin-top:50px;">
        <p>Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ø¯ÙˆØ±Ù‡ Ø§ÙˆÙ„ Ø¯Ú©ØªØ± Ù‡Ø´ØªØ±ÙˆØ¯ÛŒ | Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ | ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Â© Û±Û´Û°Û´</p>
    </footer>

    <script>
        (function() {
            // ========== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± localStorage ==========
            let users = JSON.parse(localStorage.getItem('users')) || [];
            let registrations = JSON.parse(localStorage.getItem('registrations')) || [];
            let grades = JSON.parse(localStorage.getItem('grades')) || [];
            let disciplines = JSON.parse(localStorage.getItem('disciplines')) || [];
            let messages = JSON.parse(localStorage.getItem('messages')) || [];
            let homework = JSON.parse(localStorage.getItem('homework')) || [];
            let exams = JSON.parse(localStorage.getItem('exams')) || [];
            let surveys = JSON.parse(localStorage.getItem('surveys')) || [];
            let surveyVotes = JSON.parse(localStorage.getItem('surveyVotes')) || {};
            let consultations = JSON.parse(localStorage.getItem('consultations')) || [];
            let currentUser = null;

            // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø¯ÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶
            if (!users.some(u => u.role === 'Ù…Ø¯ÛŒØ±')) {
                users.push({ username: 'admin', password: 'admin', role: 'Ù…Ø¯ÛŒØ±' });
                localStorage.setItem('users', JSON.stringify(users));
            }

            // ========== ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ==========
            const today = () => new Date().toISOString().split('T')[0];
            window.closeModal = (id) => document.getElementById(id).style.display = 'none';

            // ========== Ù…Ù†ÙˆÛŒ Ù‡Ù…Ø¨Ø±Ú¯Ø±ÛŒ ==========
            document.getElementById('hamburger').addEventListener('click', () => {
                document.getElementById('mainNav').classList.toggle('active');
            });

            // ========== ØªØºÛŒÛŒØ± Ø¨ÛŒÙ† Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ==========
            document.querySelectorAll('[data-section]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('[data-section]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                    document.getElementById(this.dataset.section + 'Section').classList.add('active');
                    document.getElementById('mainNav').classList.remove('active');
                });
            });

            // ========== Ù…Ø¯ÛŒØ±ÛŒØª ØªØ¨â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§ØªÛŒ ==========
            document.querySelectorAll('[data-tab]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('[data-tab]').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab + '-tab').classList.add('active');
                });
            });

            // ========== Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÛŒØ¯ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ ==========
            document.querySelectorAll('.feature-item').forEach(item => {
                item.addEventListener('click', function() {
                    const feature = this.dataset.feature;
                    const tabMap = {
                        'Ù†Ù…Ø±Ø§Øª': 'grades',
                        'Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡': 'daily',
                        'Ù…ÙˆØ±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ': 'discipline',
                        'ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù…': 'messages',
                        'ØªÚ©Ø§Ù„ÛŒÙ': 'homework',
                        'Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ': 'virtualclass',
                        'Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†': 'exam',
                        'Ù…Ø´Ø§ÙˆØ±Ù‡': 'consult',
                        'Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ': 'survey',
                        'Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÙØªÚ¯ÛŒ': 'schedule'
                    };
                    if (tabMap[feature]) {
                        document.querySelector(`[data-tab="${tabMap[feature]}"]`).click();
                    } else if (feature === 'Ø§Ø®Ø¨Ø§Ø±') {
                        document.querySelector('[data-section="news"]').click();
                    } else if (feature === 'Ø«Ø¨Øª Ù†Ø§Ù…') {
                        if (currentUser?.role === 'Ù…Ø¯ÛŒØ±') {
                            document.getElementById('registrationSection').scrollIntoView({ behavior: 'smooth' });
                        } else {
                            alert('Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ± Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª.');
                        }
                    } else {
                        alert(`Ø¨Ø®Ø´ Â«${feature}Â» ÙØ¹Ø§Ù„ Ø§Ø³Øª Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ù† Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯.`);
                    }
                });
            });

            // ========== Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯ Ú©Ø¯ Ø§Ø¯Ù…ÛŒÙ† ==========
            document.getElementById('regUserRole').addEventListener('change', function() {
                document.getElementById('adminCodeField').style.display = this.value === 'Ù…Ø¯ÛŒØ±' ? 'block' : 'none';
            });

            // ========== Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± ==========
            document.getElementById('doRegister').addEventListener('click', () => {
                const username = document.getElementById('regUsername').value.trim();
                const pwd = document.getElementById('regPassword').value.trim();
                const confirm = document.getElementById('regConfirm').value.trim();
                const role = document.getElementById('regUserRole').value;
                const code = document.getElementById('adminCode').value.trim();

                if (!username || !pwd || !confirm) return alert('Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
                if (pwd !== confirm) return alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ù…Ø·Ø§Ø¨Ù‚Øª Ù†Ø¯Ø§Ø±Ø¯');
                if (users.find(u => u.username === username)) return alert('Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ø§Ø³Øª');
                if (role === 'Ù…Ø¯ÛŒØ±' && code !== '12345') return alert('Ú©Ø¯ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');

                users.push({ username, password: pwd, role });
                localStorage.setItem('users', JSON.stringify(users));
                alert('Ø«Ø¨Øª Ù†Ø§Ù… Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯');
                closeModal('registerModal');
            });

            // ========== ÙˆØ±ÙˆØ¯ ==========
            document.getElementById('doLogin').addEventListener('click', () => {
                const username = document.getElementById('loginUsername').value.trim();
                const pwd = document.getElementById('loginPassword').value.trim();
                const role = document.getElementById('loginRole').value;
                const user = users.find(u => u.username === username && u.password === pwd && u.role === role);
                if (user) {
                    currentUser = user;
                    closeModal('loginModal');
                    updateUIForUser();
                } else {
                    alert('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª');
                }
            });

            document.getElementById('logoutBtn').addEventListener('click', () => {
                currentUser = null;
                updateUIForUser();
            });

            document.getElementById('loginBtn').addEventListener('click', () => {
                document.getElementById('loginModal').style.display = 'flex';
            });

            document.getElementById('registerBtn').addEventListener('click', () => {
                document.getElementById('registerModal').style.display = 'flex';
            });

            // ========== Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù‚Ø´ ==========
            function updateUIForUser() {
                const isAdmin = currentUser?.role === 'Ù…Ø¯ÛŒØ±';
                document.getElementById('loginBtn').style.display = currentUser ? 'none' : 'inline-block';
                document.getElementById('registerBtn').style.display = currentUser ? 'none' : 'inline-block';
                document.getElementById('logoutBtn').style.display = currentUser ? 'inline-block' : 'none';
                // Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† ÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ
                document.getElementById('gradeForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('disciplineForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('homeworkForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('examForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('newsForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('surveyForm').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('registrationSection').style.display = isAdmin ? 'block' : 'none';
                document.getElementById('editScheduleBtn').style.display = isAdmin ? 'block' : 'none';
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
                loadAllData();
            }

            // ========== Ù¾Ø± Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø¯Ø± Ø³Ù„Ú©Øªâ€ŒÙ‡Ø§ ==========
            function populateStudentSelects() {
                const gradeStudent = document.getElementById('gradeStudent');
                const disciplineStudent = document.getElementById('disciplineStudent');
                const messageReceiver = document.getElementById('messageReceiver');
                if (!gradeStudent) return;
                const options = registrations.map(r => `<option value="${r.username}">${r.name} ${r.family}</option>`).join('');
                gradeStudent.innerHTML = options;
                disciplineStudent.innerHTML = options;
                messageReceiver.innerHTML = options + (currentUser?.role === 'Ù…Ø¯ÛŒØ±' ? '<option value="all">Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</option>' : '');
            }

            // ========== Ù†Ù…Ø±Ø§Øª ==========
            function renderGrades() {
                const filtered = currentUser?.role === 'Ù…Ø¯ÛŒØ±' ? grades : grades.filter(g => g.username === currentUser?.username);
                const tbody = document.getElementById('gradesTableBody');
                tbody.innerHTML = '';
                let sum = 0, max = 0, min = 20;
                filtered.forEach(g => {
                    const student = registrations.find(r => r.username === g.username);
                    const name = student ? `${student.name} ${student.family}` : g.username;
                    tbody.innerHTML += `<tr><td>${name}</td><td>${g.subject}</td><td>${g.score}</td><td>${g.term}</td><td>${g.date}</td></tr>`;
                    sum += g.score;
                    max = Math.max(max, g.score);
                    min = Math.min(min, g.score);
                });
                document.getElementById('avgGrade').innerText = filtered.length ? (sum/filtered.length).toFixed(2) : 'Û°';
                document.getElementById('bestGrade').innerText = filtered.length ? max : 'Û°';
                document.getElementById('worstGrade').innerText = filtered.length ? min : 'Û°';

                // Ù†Ù…ÙˆØ¯Ø§Ø±
                const ctx = document.getElementById('gradesChart')?.getContext('2d');
                if (ctx) {
                    // destroy previous chart if any
                    Chart.getChart(ctx)?.destroy();
                    if (filtered.length) {
                        new Chart(ctx, {
                            type: 'bar',
                            data: {
                                labels: filtered.map(g => g.subject),
                                datasets: [{ label: 'Ù†Ù…Ø±Ø§Øª', data: filtered.map(g => g.score), backgroundColor: '#2563eb' }]
                            }
                        });
                    }
                }
            }

            document.getElementById('saveGrade')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                grades.push({
                    username: document.getElementById('gradeStudent').value,
                    subject: document.getElementById('gradeSubject').value,
                    score: parseFloat(document.getElementById('gradeScore').value),
                    term: document.getElementById('gradeTerm').value,
                    date: today()
                });
                localStorage.setItem('grades', JSON.stringify(grades));
                renderGrades();
            });

            // ========== Ù…ÙˆØ§Ø±Ø¯ Ø§Ù†Ø¶Ø¨Ø§Ø·ÛŒ ==========
            function renderDiscipline() {
                const tbody = document.getElementById('disciplineTable');
                tbody.innerHTML = '';
                disciplines.forEach(d => {
                    const student = registrations.find(r => r.username === d.username);
                    tbody.innerHTML += `<tr><td>${student ? student.name + ' ' + student.family : d.username}</td><td>${d.type === 'positive' ? 'âœ… ØªØ´ÙˆÛŒÙ‚' : 'âš ï¸ Ø§Ø®Ø·Ø§Ø±'}</td><td>${d.desc}</td><td>${d.date}</td></tr>`;
                });
            }

            document.getElementById('saveDiscipline')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                disciplines.push({
                    username: document.getElementById('disciplineStudent').value,
                    type: document.getElementById('disciplineType').value,
                    desc: document.getElementById('disciplineDesc').value,
                    date: today()
                });
                localStorage.setItem('disciplines', JSON.stringify(disciplines));
                renderDiscipline();
            });

            // ========== ØµÙ†Ø¯ÙˆÙ‚ Ù¾ÛŒØ§Ù… ==========
            function renderMessages() {
                const list = document.getElementById('messageList');
                if (!list) return;
                const userMessages = messages.filter(m => m.receiver === currentUser?.username || m.sender === currentUser?.username || (m.receiver === 'all' && currentUser?.role === 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²'));
                list.innerHTML = userMessages.map(m => `
                    <div style="background:#f1f5f9; padding:15px; margin-bottom:10px; border-radius:12px; border-right:5px solid ${m.sender === currentUser?.username ? '#10b981' : '#2563eb'}">
                        <strong>${m.sender === currentUser?.username ? 'Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ' + m.receiver : 'Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² ' + m.sender}</strong>
                        <p>${m.subject}</p>
                        <small>${m.date}</small>
                    </div>
                `).join('') || '<p>Ù¾ÛŒØ§Ù…ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>';
            }

            document.getElementById('newMessageBtn')?.addEventListener('click', () => {
                populateStudentSelects(); // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú¯ÛŒØ±Ù†Ø¯Ú¯Ø§Ù†
                document.getElementById('messageModal').style.display = 'flex';
            });

            document.getElementById('sendMessage')?.addEventListener('click', () => {
                messages.push({
                    sender: currentUser.username,
                    receiver: document.getElementById('messageReceiver').value,
                    subject: document.getElementById('messageSubject').value,
                    body: document.getElementById('messageBody').value,
                    date: today()
                });
                localStorage.setItem('messages', JSON.stringify(messages));
                closeModal('messageModal');
                renderMessages();
            });

            // ========== ØªÚ©Ø§Ù„ÛŒÙ ==========
            function renderHomework() {
                const container = document.getElementById('homeworkList');
                if (!container) return;
                // Ø§Ú¯Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø³ØªØŒ ÙÙ‚Ø· ØªÚ©Ø§Ù„ÛŒÙ Ù¾Ø§ÛŒÙ‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø¨ÛŒÙ†Ø¯
                const student = registrations.find(r => r.username === currentUser?.username);
                const filtered = currentUser?.role === 'Ù…Ø¯ÛŒØ±' ? homework : homework.filter(h => h.class === student?.grade);
                container.innerHTML = filtered.map(h => `
                    <div style="background:#f1f5f9; padding:15px; margin-bottom:10px; border-radius:12px;">
                        <h4>${h.title}</h4>
                        <p>${h.desc}</p>
                        <small>Ù¾Ø§ÛŒÙ‡: ${h.class} | ØªØ§Ø±ÛŒØ®: ${h.date}</small>
                    </div>
                `).join('');
            }

            document.getElementById('saveHomework')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                homework.push({
                    title: document.getElementById('hwTitle').value,
                    desc: document.getElementById('hwDesc').value,
                    class: document.getElementById('hwClass').value,
                    date: today()
                });
                localStorage.setItem('homework', JSON.stringify(homework));
                renderHomework();
            });

            // ========== Ú©Ù„Ø§Ø³ Ù…Ø¬Ø§Ø²ÛŒ ==========
            window.joinClass = (platform) => {
                const urls = {
                    skyroom: 'https://www.skyroom.online/',
                    bbb: 'https://bigbluebutton.org/',
                    adobe: 'https://www.adobe.com/products/adobeconnect.html'
                };
                window.open(urls[platform], '_blank');
            };

            // ========== Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† ==========
            function renderExams() {
                const list = document.getElementById('examList');
                if (!list) return;
                list.innerHTML = exams.map((e, idx) => `
                    <div style="background:#f1f5f9; padding:15px; margin-bottom:10px; border-radius:12px;">
                        <h4>${e.title}</h4>
                        <p>${e.desc}</p>
                        <small>Ù…Ø¯Øª: ${e.time} Ø¯Ù‚ÛŒÙ‚Ù‡ | ØªØ§Ø±ÛŒØ®: ${e.date}</small>
                        <button class="btn btn-success" style="margin-top:10px;" onclick="startExam(${idx})">Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†</button>
                    </div>
                `).join('');
            }

            window.startExam = (index) => {
                const exam = exams[index];
                document.getElementById('examModalTitle').innerText = exam.title;
                // Ø³ÙˆØ§Ù„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡
                document.getElementById('examQuestions').innerHTML = `
                    <p>Û±. Ø³ÙˆØ§Ù„ Ø§ÙˆÙ„ Ù†Ù…ÙˆÙ†Ù‡ØŸ</p>
                    <input type="radio" name="q1" value="a"> Ú¯Ø²ÛŒÙ†Ù‡ Û±<br>
                    <input type="radio" name="q1" value="b"> Ú¯Ø²ÛŒÙ†Ù‡ Û²<br>
                    <input type="radio" name="q1" value="c"> Ú¯Ø²ÛŒÙ†Ù‡ Û³<br>
                    <p>Û². Ø³ÙˆØ§Ù„ Ø¯ÙˆÙ… Ù†Ù…ÙˆÙ†Ù‡ØŸ</p>
                    <input type="radio" name="q2" value="a"> Ú¯Ø²ÛŒÙ†Ù‡ Û±<br>
                    <input type="radio" name="q2" value="b"> Ú¯Ø²ÛŒÙ†Ù‡ Û²<br>
                `;
                document.getElementById('examModal').style.display = 'flex';
            };

            document.getElementById('createExam')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                exams.push({
                    title: document.getElementById('examTitle').value,
                    time: document.getElementById('examTime').value,
                    desc: document.getElementById('examDesc').value,
                    date: today()
                });
                localStorage.setItem('exams', JSON.stringify(exams));
                renderExams();
            });

            document.getElementById('submitExam')?.addEventListener('click', () => {
                alert('Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯. Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ: Û±Û¶ Ø§Ø² Û²Û°');
                closeModal('examModal');
            });

            // ========== Ù…Ø´Ø§ÙˆØ±Ù‡ ==========
            document.getElementById('bookConsultBtn')?.addEventListener('click', () => {
                const date = prompt('ØªØ§Ø±ÛŒØ® Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± (YYYY-MM-DD) Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', today());
                if (date) {
                    consultations.push({ username: currentUser.username, date, status: 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±' });
                    localStorage.setItem('consultations', JSON.stringify(consultations));
                    alert('Ù†ÙˆØ¨Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø±Ø²Ø±Ùˆ Ø´Ø¯');
                    renderConsultations();
                }
            });

            function renderConsultations() {
                const userCons = consultations.filter(c => c.username === currentUser?.username);
                document.getElementById('myAppointments').innerText = userCons.length + ' Ù†ÙˆØ¨Øª';
                // Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±
                const list = document.getElementById('consultationList');
                if (currentUser?.role === 'Ù…Ø¯ÛŒØ±') {
                    list.innerHTML = consultations.map(c => {
                        const student = registrations.find(r => r.username === c.username);
                        return `<div>${student?.name} ${student?.family} - ØªØ§Ø±ÛŒØ® ${c.date} - ÙˆØ¶Ø¹ÛŒØª ${c.status}</div>`;
                    }).join('');
                } else {
                    list.innerHTML = '';
                }
            }

            // ========== Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ ==========
            function renderSurveys() {
                const list = document.getElementById('surveyList');
                if (!list) return;
                list.innerHTML = surveys.map((s, idx) => `
                    <div style="background:#f1f5f9; padding:15px; margin-bottom:10px; border-radius:12px;">
                        <h4>${s.question}</h4>
                        <button class="btn" onclick="showSurvey(${idx})">Ø´Ø±Ú©Øª Ø¯Ø± Ù†Ø¸Ø±Ø³Ù†Ø¬ÛŒ</button>
                    </div>
                `).join('');
            }

            window.showSurvey = (index) => {
                const s = surveys[index];
                document.getElementById('surveyModalTitle').innerText = s.question;
                const options = s.options.split(',').map(opt => opt.trim());
                let html = '';
                options.forEach((opt, i) => {
                    html += `<input type="radio" name="surveyOpt" value="${opt}"> ${opt}<br>`;
                });
                document.getElementById('surveyOptions').innerHTML = html;
                document.getElementById('surveyModal').dataset.index = index;
                document.getElementById('surveyModal').style.display = 'flex';
            };

            document.getElementById('voteSurvey')?.addEventListener('click', () => {
                const selected = document.querySelector('input[name="surveyOpt"]:checked');
                if (!selected) return alert('ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                const index = document.getElementById('surveyModal').dataset.index;
                const key = `survey_${index}`;
                surveyVotes[key] = surveyVotes[key] || {};
                surveyVotes[key][selected.value] = (surveyVotes[key][selected.value] || 0) + 1;
                localStorage.setItem('surveyVotes', JSON.stringify(surveyVotes));
                alert('Ø±Ø£ÛŒ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯');
                closeModal('surveyModal');
            });

            document.getElementById('createSurvey')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                surveys.push({
                    question: document.getElementById('surveyQuestion').value,
                    options: document.getElementById('surveyOptions').value
                });
                localStorage.setItem('surveys', JSON.stringify(surveys));
                renderSurveys();
            });

            // ========== Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡ ==========
            function renderDaily() {
                const todayStr = today();
                const present = Math.floor(Math.random() * 30) + 10; // Ù†Ù…ÙˆÙ†Ù‡
                const absent = Math.floor(Math.random() * 5);
                document.getElementById('presentToday').innerText = present;
                document.getElementById('absentToday').innerText = absent;
                document.getElementById('hwToday').innerText = homework.filter(h => h.date === todayStr).length;
                document.getElementById('dailyDetails').innerHTML = `
                    <p>ğŸ“Œ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²: Û¶</p>
                    <p>ğŸ“Œ ØªÚ©Ø§Ù„ÛŒÙ Ø¬Ø¯ÛŒØ¯: ${homework.filter(h => h.date === todayStr).length}</p>
                    <p>ğŸ“Œ Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²: Ø¬Ø´Ù† Ø±ÙˆØ² Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</p>
                `;
            }

            // ========== Ø§Ø®Ø¨Ø§Ø± ==========
            let newsList = JSON.parse(localStorage.getItem('news')) || [];
            function renderNews() {
                const container = document.getElementById('newsContainer');
                if (!container) return;
                container.innerHTML = newsList.map(n => `
                    <div style="background:white; border-radius:16px; overflow:hidden; box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);">
                        ${n.image ? `<img src="${n.image}" style="width:100%; height:150px; object-fit:cover;">` : ''}
                        <div style="padding:15px;">
                            <h4>${n.title}</h4>
                            <p>${n.content}</p>
                            <small>${n.date}</small>
                        </div>
                    </div>
                `).join('');
            }

            document.getElementById('addNews')?.addEventListener('click', () => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                newsList.push({
                    title: document.getElementById('newsTitle').value,
                    date: document.getElementById('newsDate').value,
                    content: document.getElementById('newsContent').value,
                    image: document.getElementById('newsImage').value
                });
                localStorage.setItem('news', JSON.stringify(newsList));
                renderNews();
            });

            // ========== Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ØªÙˆØ³Ø· Ù…Ø¯ÛŒØ± ==========
            document.getElementById('adminRegistrationForm')?.addEventListener('submit', (e) => {
                e.preventDefault();
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                const name = document.getElementById('regName').value.trim();
                const family = document.getElementById('regFamily').value.trim();
                const username = (name + '.' + family).replace(/\s+/g, '').toLowerCase();
                if (users.find(u => u.username === username)) {
                    alert('Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ù†Ø§Ù… Ø´Ø¯Ù‡');
                    return;
                }
                users.push({ username, password: '123456', role: 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²' });
                registrations.push({
                    username,
                    name, family,
                    national: document.getElementById('regNational').value,
                    birth: document.getElementById('regBirth').value,
                    grade: document.getElementById('regGrade').value,
                    parent: document.getElementById('regParent').value,
                    phone: document.getElementById('regPhone').value,
                    landline: document.getElementById('regLandline').value,
                    address: document.getElementById('regAddress').value
                });
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('registrations', JSON.stringify(registrations));
                alert(`Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ${username} Ùˆ Ø±Ù…Ø² 123456 Ø«Ø¨Øª Ø´Ø¯.`);
                renderRegistrations();
                e.target.reset();
            });

            function renderRegistrations() {
                const tbody = document.getElementById('registrationsList');
                if (!tbody) return;
                tbody.innerHTML = registrations.map(r => `
                    <tr>
                        <td>${r.name}</td><td>${r.family}</td><td>${r.national}</td><td>${r.grade}</td><td>${r.parent}</td><td>${r.phone}</td><td>${r.username}</td>
                        <td><button class="btn btn-danger" onclick="deleteStudent('${r.username}')">Ø­Ø°Ù</button></td>
                    </tr>
                `).join('');
            }

            window.deleteStudent = (username) => {
                if (currentUser?.role !== 'Ù…Ø¯ÛŒØ±') return;
                users = users.filter(u => u.username !== username);
                registrations = registrations.filter(r => r.username !== username);
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('registrations', JSON.stringify(registrations));
                renderRegistrations();
            };

            // ========== Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ ==========
            function loadAllData() {
                populateStudentSelects();
                renderGrades();
                renderDiscipline();
                renderMessages();
                renderHomework();
                renderExams();
                renderSurveys();
                renderConsultations();
                renderDaily();
                renderNews();
                renderRegistrations();
            }

            // ========== Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ==========
            updateUIForUser();
            loadAllData();

            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§
            document.getElementById('newsDate') && (document.getElementById('newsDate').value = today());
            document.getElementById('regBirth') && (document.getElementById('regBirth').value = '2010-01-01');
        })();
    </script>
</body>
</html>
